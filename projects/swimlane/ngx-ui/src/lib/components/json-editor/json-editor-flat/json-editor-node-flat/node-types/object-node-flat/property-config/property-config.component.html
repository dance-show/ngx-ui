<div class="property-config">
  <div class="header">
    <span>Property Configuration</span>
    <button type="button" class="btn btn-primary" (click)="applyChanges()"><i class="ngx-icon ngx-check has-text"></i>
      Apply</button>
  </div>
  <ngx-tabs *ngIf="property">
    <ngx-tab label="General">
      <ngx-input type="text" name="propertyName" [(ngModel)]="editableProperty.value.propertyName"
        [label]="'PROPERTY NAME'" [required]="true" [hint]="'Must only contain A-Z, a-z, 0-9 or _'">
      </ngx-input>

      <ngx-input type="text" [(ngModel)]="editableProperty.value.title" [label]="'PROPERTY TITLE'"
        [hint]="'A human-readable name for this property'">
      </ngx-input>

      <ngx-input type="text" [(ngModel)]="editableProperty.value.description" [label]="'PROPERTY DESCRIPTION'"
        [hint]="'A description for the property'">
      </ngx-input>

      <ngx-select [filterable]="false" [ngModel]="[inferTypeName(editableProperty.value)]"
        (ngModelChange)="updateTypeAndFormat($event[0])" [required]="true" [label]="'TYPE'">
        <ngx-select-option *ngFor="let dataType of dataTypes" [name]="dataType.name"
          [value]="inferTypeName(dataType.schema)">
        </ngx-select-option>
      </ngx-select>

      <ngx-input *ngIf="inferTypeName(editableProperty.value) === 'string'" type=" text" class="new-enum-input"
        [(ngModel)]="newEnumValue" [label]="'ADD ENUM VALUE'">
        <ngx-input-suffix>
          <button (click)="addEnumValue()" [disabled]="!newEnumValue.length">
            <i class="ngx-icon ngx-ngx-icon ngx-check"></i>
          </button>
        </ngx-input-suffix>
      </ngx-input>

      <div *ngIf="editableProperty.value.enum?.length" class="enum-edit">
        <div class="tag" *ngFor="let value of editableProperty.value.enum">
          <span>{{ value }}</span>
          <button type="button" (click)="removeEnumValue(value)">
            <i class="ngx-icon ngx-x"></i>
          </button>
        </div>
      </div>

      <div class="constrain-row"
        *ngIf="editableProperty.value.type === 'number' || editableProperty.value.type === 'integer'">
        <ngx-input type="number" [(ngModel)]="editableProperty.value.minimum" [label]="'MINIMUM'"></ngx-input>

        <ngx-input type="number" [(ngModel)]="editableProperty.value.maximum" [label]="'MAXIMUM'"></ngx-input>
      </div>

      <div class="constrain-row" *ngIf="editableProperty.value.type === 'string'">
        <ngx-input type="number" [(ngModel)]="editableProperty.value.minLength" [label]="'MINIMUM LENGTH'"></ngx-input>

        <ngx-input type="number" [(ngModel)]="editableProperty.value.maxLength" [label]="'MAXIMUM LENGTH'"></ngx-input>
      </div>

      <div class="constrain-row" *ngIf="editableProperty.value.type === 'array'">
        <ngx-input type="number" [(ngModel)]="editableProperty.value.minItems" [label]="'MIN ITEMS'"></ngx-input>
      </div>

      <!-- TODO: Validate -->
      <ngx-input type="text" [(ngModel)]="editableProperty.value.pattern" [label]="'PATTERN TO MATCH'">
      </ngx-input>

      <ngx-checkbox [(ngModel)]="required">
        Required
      </ngx-checkbox>
    </ngx-tab>
  </ngx-tabs>
</div>